/*------------------------------------
#
# TOPBAR
#
------------------------------------*/
/*------------------------------------
# POPUP SEARCH MENU
------------------------------------*/
.roam-topbar {
  --icon-size: 24px;
  --searchbar-height: minmax(45px, 5vh);
  --searchbar-width: 500px; // aesthetics
  --searchbar-left: 55vw; // aesthetics
  --searchbar-top: 27vh; // aesthetics
}

// HACK
@mixin topbar_search-hack {
  > .flex-h-box {
    /*--  remove useless divs --*/
    > div[style^="flex"]:not([class]) {
      display: none;
    }
    /*--  make all look like buttons --*/
    > div,
    > span,
    .rm-find-or-create-wrapper,
    input#find-or-create-input {
      @include icons;
    }
    input#find-or-create-input {
      // padding: 0px;
      cursor: pointer; // make cursor look like hovering a button
    }
    .bp3-icon-search:before {
      @include icons;
      place-self: center;
      margin: 0px !important;
      pointer-events: none; // so that when you click on the search button is the same as clicking on the input area
    }
  }

  .rm-find-or-create-wrapper {
    flex: unset !important;
    input#find-or-create-input:focus,
    .bp3-overlay {
      /* match size */
      width: var(--searchbar-width);

      /* match position */
      position: fixed !important;
      top: var(--searchbar-top);
      left: var(--searchbar-left);
      z-index: 1000; /* place at front of page */
      transform: translate(-50%, 0);
    }
    input#find-or-create-input:focus {
      height: var(--searchbar-height);
    }
    .bp3-overlay .bp3-transition-container {
      transform: none !important;
    }
    .bp3-overlay {
      top: calc(var(--searchbar-top) + var(--searchbar-height));
    }
  }
}

.roam-topbar {
  @include topbar_appearance;
  /*--  topbar element placement --*/
  .flex-h-box {
    @include topbar_icons-placement;
  }

  /*--  create search menu popup --*/
  @include topbar_search-hack;

  /*-- Make all icons look the same --*/
  [class*="bp3-icon"], //todo test if this still works with regular search input
  .rm-saving-icon {
    /* style icon to look like the others */
    @include topbar_icons-style;
  }
  .rm-saving-inner-icon {
    //review
    place-self: center;
    margin: 0px !important;
  }
}
