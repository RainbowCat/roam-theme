/*------------------------------------
# RESET SITE SETTINGS
------------------------------------*/
html,
body {
  @include font-family;
  font-size: $font-size_regular;
  line-height: 1.2em;
  background: $main_bg;
  color: $main_text-color;
}

ol,
ul {
  margin-top: initial;
}

.roam-body .roam-app h1 {
  color: unset;
}

div,
span {
  font: inherit;
  color: inherit;
  background: transparent;
  text-decoration: inherit;
}

div[style="position: absolute; z-index: 1000; top: 0px; right: 0px; opacity: 0.5;"] {
  //code block button
  z-index: 3 !important;
}

.roam-block-container,
.rm-block-text {
  max-width: 100%;
}

// block spacing
.roam-article > div:first-child .roam-block-container {
  margin-top: 7px;
  margin-bottom: 7px;
}

// indent size
.roam-block-container > .rm-block-children {
  margin-left: 17.5px;
}

.roam-block-container.rm-block.rm-block--open.rm-not-focused.block-bullet-view.block-border-left {
  padding-right: 5px; // make space for ref count button
}

.kanban-board {
  max-width: none;
  overflow: scroll;
}

.rm-full-width {
  margin-right: 0%;
}

.rm-zoom.zoom-path-view {
  margin-top: 0px !important;
}

[style^="margin-left: -27px"] {
  margin-left: 0px !important;
}

/*------------------------------------
# WORKSPACE (Layout)
------------------------------------*/
// level 1
#app .roam-body .roam-app {
  box-sizing: border-box;
  position: fixed;
  top: 0px;
  left: 0px;
  height: 100vh;
  width: 100vw;
  max-height: 100vh;
  max-width: 100vw;
  overflow: hidden;
  opacity: 1;

  // Remove main area left margin when there's no sidebar (public pages)
  > div:only-child:not(.roam-sidebar-container) {
    margin-left: 0 !important;
  }

  // level 2: leftbar, right-area
  > .roam-sidebar-container,
  > .roam-sidebar-container > .roam-sidebar-content {
    width: $leftbar_width;
  }
  > div.flex-h-box {
    & {
      // when left sidebar is showing
    }
    &[style*="margin-left"] {
      // when left sidebar is hidden
      margin-left: $leftbar_width !important;
    }
    // level 3: editor & topbar, rightbar
    > .roam-main {
      // level 4: topbar, roam-body-main
      > .rm-topbar {
        height: $topbar_height;
      }
      // level 5
      > .roam-body-main {
        overflow: scroll;
        padding: $editor-margin; // add space surrounding editor

        > div:first-child {
          // useless div
          padding: 0px !important;

          // level 6
          > .roam-log-container,
          > .roam-article {
            margin: 0px;
            padding: 0px;
            // padding-left: 20px;
          }
        }

        > #buffer {
          visibility: hidden;
        }
      }
    }
    > #right-sidebar {
    }
  }
}

/*------------------------------------
# WORKSPACE (Text)
------------------------------------*/
#app .roam-body .roam-app {
  @include font-family;
  color: $main_text-color;

  // level 2: leftbar, right-area
  > .roam-sidebar-container,
  > .roam-sidebar-container > .roam-sidebar-content {
    @include font-family;
    color: $main_text-color;
  }
  > div.flex-h-box {
    // level 3: editor & topbar, rightbar
    > .roam-main {
      @include font-family;
      color: $main_text-color;
      // level 4: topbar, roam-body-main
      > .rm-topbar {
        @include font-family;
        color: $main_text-color;
      }
      // level 5
      > .roam-body-main {
        @include font-family;
        color: $main_text-color;
      }
    }
    > #right-sidebar {
      @include font-family;
      color: $main_text-color;
    }
  }
}

/*------------------------------------
# WORKSPACE (Appearance)
------------------------------------*/
@mixin better-roam-layout {
  #app .roam-body .roam-app {
    background: $main_bg;

    // level 2: leftbar, right-area
    > .roam-sidebar-container,
    > .roam-sidebar-container > .roam-sidebar-content {
      background: $leftbar_bg !important;
    }
    > div.flex-h-box {
      // level 3: editor & topbar, rightbar
      > .roam-main {
        // level 4: topbar, roam-body-main
        > .rm-topbar {
          background: $topbar_bg;
        }
        // level 5
        > .roam-body-main {
          border: 1px solid $main_subtle-color;
          border-bottom: none;
          border-radius: 12px 12px 0 0; /* round off corners */
          /* offset-x | offset-y | blur-radius | spread-radius | color */
          margin: 0px 8px; /* add space to show shadow */
          box-shadow: 0px 0px 20px 3px grey;
          background: $main_bg;
        }
      }
      > #right-sidebar {
        background: $rightbar_bg;
      }
    }
  }
}

@mixin regular-layout {
  #app .roam-body .roam-app {
    background: $main_bg;

    // level 2: leftbar, right-area
    > .roam-sidebar-container,
    > .roam-sidebar-container > .roam-sidebar-content {
      background: $leftbar_bg !important;
    }
    > div.flex-h-box {
      // level 3: editor & topbar, rightbar
      > .roam-main {
        // level 4: topbar, roam-body-main
        > .rm-topbar {
          background: $topbar_bg;
        }
        // level 5
        > .roam-body-main {
          background: $main_bg;
        }
      }
      > #right-sidebar {
        background: $rightbar_bg;
      }
    }
  }
}

// @include better-roam-layout();
@include regular-layout();